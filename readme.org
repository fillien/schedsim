#+title: Scheduling simulator
* Setup Barectf
In order to trace the simulation, Barectf is use to generator CTF formated stream ready to be decode by Trace Compass. To compile the simulator, Barectf librairy have to be generated. A YAML config file is joined in the sources. It will be use to generate the librairy :
#+BEGIN_SRC shell
  $ barectf generate --metadata-dir=trace config.yaml
#+END_SRC

The command will generate three files :
- =barectf.c=
- =barectf.h=
- =barectf-bitfield.h=

Now the simulator can be compiled with the newly generated =barectf.c= file and the plateform descriptor =barectf-plateform-simulator.c=.
#+BEGIN_SRC shell
  cmake -S . -B build -G Ninja
  cmake --build build
#+END_SRC

After compilation, the simulator can be launch and the trace analyze with Babeltrace2 or Trace Compass :
#+BEGIN_SRC  shell
  $ ./build/launch
  $ babeltrace2 trace
#+END_SRC
